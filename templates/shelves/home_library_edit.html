{% extends "base.html" %}
{% block title %}Экземпляр: {{ item.book.title }}{% endblock %}
{% block content %}
<a class="btn btn-link btn-sm px-0" href="{{ next_url }}">
  <i class="bi bi-arrow-left"></i> Вернуться к библиотеке
</a>

<div class="card border-0 shadow-sm">
  <div class="card-body">
    <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3 mb-4">
      <div>
        <h1 class="h4 mb-1">{{ item.book.title }}</h1>
        <p class="text-muted mb-0">{{ item.book.authors.all|join:", "|default:"Автор неизвестен" }}</p>
      </div>
      <div class="text-muted small">
        Добавлена в полку {{ item.added_at|date:"d.m.Y" }}
      </div>
    </div>

    <form method="post" novalidate>
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ next_url }}">
      {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
      {% endif %}
      <div class="row g-3">
        <div class="col-12 col-md-6">
          <label class="form-label" for="id_edition">{{ form.edition.label }}</label>
          {{ form.edition }}
          {% if form.edition.help_text %}<div class="form-text">{{ form.edition.help_text }}</div>{% endif %}
          {{ form.edition.errors }}
        </div>
        <div class="col-12 col-md-6">
          <label class="form-label" for="id_language">{{ form.language.label }}</label>
          {{ form.language }}
          {% if form.language.help_text %}<div class="form-text">{{ form.language.help_text }}</div>{% endif %}
          {{ form.language.errors }}
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label" for="id_format">{{ form.format.label }}</label>
          {{ form.format }}
          {{ form.format.errors }}
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label" for="id_status">{{ form.status.label }}</label>
          {{ form.status }}
          {% if form.status.help_text %}<div class="form-text">{{ form.status.help_text }}</div>{% endif %}
          {{ form.status.errors }}
        </div>
        <div class="col-12 col-md-4">
          <label class="form-label" for="id_acquired_at">{{ form.acquired_at.label }}</label>
          {{ form.acquired_at }}
          {% if form.acquired_at.help_text %}<div class="form-text">{{ form.acquired_at.help_text }}</div>{% endif %}
          {{ form.acquired_at.errors }}
        </div>
        <div class="col-12 col-md-6">
          <label class="form-label" for="id_location">{{ form.location.label }}</label>
          {{ form.location }}
          {% if form.location.help_text %}<div class="form-text">{{ form.location.help_text }}</div>{% endif %}
          {{ form.location.errors }}
        </div>
        <div class="col-12 col-md-6">
          <label class="form-label" for="id_shelf_section">{{ form.shelf_section.label }}</label>
          {{ form.shelf_section }}
          {% if form.shelf_section.help_text %}<div class="form-text">{{ form.shelf_section.help_text }}</div>{% endif %}
          {{ form.shelf_section.errors }}
        </div>
        <div class="col-12 col-md-6">
          <label class="form-label" for="id_series_name">{{ form.series_name.label }}</label>
          {{ form.series_name }}
          {% if form.series_name.help_text %}<div class="form-text">{{ form.series_name.help_text }}</div>{% endif %}
          {{ form.series_name.errors }}
        </div>
        <div class="col-12 col-md-6">
          <label class="form-label" for="id_custom_genres">{{ form.custom_genres.label }}</label>
          {{ form.custom_genres }}
          {% if form.custom_genres.help_text %}<div class="form-text">{{ form.custom_genres.help_text }}</div>{% endif %}
          {{ form.custom_genres.errors }}
        </div>
        <div class="col-12 col-md-6">
          <div class="form-check mb-3">
            {{ form.is_classic }}
            <label class="form-check-label" for="id_is_classic">{{ form.is_classic.label }}</label>
            {% if form.is_classic.help_text %}<div class="form-text">{{ form.is_classic.help_text }}</div>{% endif %}
          </div>
          {{ form.is_classic.errors }}
        </div>
        <div class="col-12 col-md-6">
          <div class="form-check mb-3">
            {{ form.is_disposed }}
            <label class="form-check-label" for="id_is_disposed">{{ form.is_disposed.label }}</label>
            {% if form.is_disposed.help_text %}<div class="form-text">{{ form.is_disposed.help_text }}</div>{% endif %}
          </div>
          {{ form.is_disposed.errors }}
        </div>
        <div class="col-12">
          <label class="form-label" for="id_disposition_note">{{ form.disposition_note.label }}</label>
          {{ form.disposition_note }}
          {% if form.disposition_note.help_text %}<div class="form-text">{{ form.disposition_note.help_text }}</div>{% endif %}
          {{ form.disposition_note.errors }}
        </div>
        <div class="col-12">
          <label class="form-label" for="id_notes">{{ form.notes.label }}</label>
          {{ form.notes }}
          {% if form.notes.help_text %}<div class="form-text">{{ form.notes.help_text }}</div>{% endif %}
          {{ form.notes.errors }}
        </div>
      </div>
      <div class="d-flex justify-content-end gap-2 mt-4">
        <a class="btn btn-outline-secondary" href="{{ next_url }}">Отмена</a>
        <button class="btn btn-primary" type="submit">Сохранить</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}