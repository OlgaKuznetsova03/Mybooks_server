{% extends "base.html" %}
{% load i18n %}

{% block title %}{{ club.title }} · {% trans "Книжный клуб сообщества" %} · {{ block.super }}{% endblock %}

{% block extra_css %}
<style>
/* ===== Тёплая тема страницы клуба ===== */
.community-club-theme{
  --club-accent:#d9a365;        /* кнопки и активные элементы */
  --club-accent-dark:#c48847;   /* hover/active */
  --club-soft:#fbe7b5;          /* мягкие фоны/выделения */
  --club-soft-10:rgba(251,231,181,.10);
  --club-soft-18:rgba(251,231,181,.18);
  --club-soft-28:rgba(251,231,181,.28);
  --club-ink:#2b1e0f;           /* тёмный текст */
}

/* Хлебные крошки */
.community-club-theme .breadcrumb{
  background:var(--club-soft-10);
  border:1px solid var(--club-soft-18);
  padding:.5rem .75rem;
  border-radius:.75rem;
  margin-bottom:1rem;
}

/* Предупреждение — мягче, в палитре */
.community-club-theme .alert-warning{
  background:var(--club-soft);
  border-color:var(--club-soft-28);
  color:var(--club-ink);
}

/* Карточка */
.community-club-theme .card{
  border-color:var(--club-soft-18);
  box-shadow:0 16px 36px rgba(0,0,0,.06);
}
.community-club-theme .card-body{
  background-image: radial-gradient(80% 120% at 100% 0%, var(--club-soft-10), transparent 55%);
}

/* Малые «фактоиды» (город/формат/расписание) */
.community-club-theme .bg-body-secondary{
  background:var(--club-soft) !important;
  border:1px solid var(--club-soft-18);
}

/* Кнопки */
.community-club-theme .btn-primary{
  background-color:var(--club-accent) !important;
  border-color:var(--club-accent) !important;
  color:var(--club-ink) !important;
  font-weight:600;
}
.community-club-theme .btn-primary:hover,
.community-club-theme .btn-primary:focus{
  background-color:var(--club-accent-dark) !important;
  border-color:var(--club-accent-dark) !important;
  color:var(--club-ink) !important;
}

.community-club-theme .btn-outline-secondary{
  border-color:var(--club-accent);
  color:var(--club-ink);
  background:transparent;
}
.community-club-theme .btn-outline-secondary:hover,
.community-club-theme .btn-outline-secondary:focus{
  background:var(--club-soft);
  border-color:var(--club-accent-dark);
  color:var(--club-ink);
}

/* Заголовок внутри карточки — небольшой акцент-подсвет */
.community-club-theme h1.h3{
  display:inline-block;
  padding:.35rem .6rem;
  border-radius:.5rem;
  background:var(--club-soft);
  border:1px solid var(--club-soft-18);
}

/* Мелкие штрихи */
.community-club-theme .text-body-secondary{ color:#6b5a41 !important; }

/* Мобайл — чуть мягче отступы */
@media (max-width:575.98px){
  .community-club-theme .breadcrumb{ padding:.5rem .6rem; }
}
</style>
{% endblock %}

{% block content %}
<div class="community-club-theme">
  <div class="container py-4">
    <nav aria-label="breadcrumb" class="mb-3">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{% url 'collaborations:blogger_community' %}?tab=clubs">{% trans "Блогерский хаб" %}</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">{{ club.title }}</li>
      </ol>
    </nav>

    <div class="alert alert-warning d-flex align-items-start" role="alert">
      <i class="bi bi-shield-exclamation me-2 fs-4"></i>
      <div>
        <p class="fw-semibold mb-1">{% trans "Проверьте ссылку перед переходом" %}</p>
        <p class="mb-0">{% trans "Мы не модерируем внешние ресурсы. Убедитесь, что доверяете организаторам клуба, прежде чем делиться личными данными или переходить по ссылкам." %}</p>
      </div>
    </div>

    <div class="card shadow-sm">
      <div class="card-body">
        <h1 class="h3 mb-3">{{ club.title }}</h1>
        <div class="text-muted small mb-3">
          <i class="bi bi-clock-history me-1"></i>{% trans "Добавлено" %} {{ club.created_at|date:"j E Y" }} ·
          <i class="bi bi-person-circle ms-1 me-1"></i>{{ club.submitted_by.get_full_name|default:club.submitted_by.username }}
        </div>

        <div class="row row-cols-1 row-cols-md-2 g-3 mb-4">
          {% if club.city %}
            <div class="col">
              <div class="border rounded p-3 h-100 bg-body-secondary">
                <div class="text-uppercase text-muted small mb-1">{% trans "Город" %}</div>
                <div class="fw-semibold">{{ club.city }}</div>
              </div>
            </div>
          {% endif %}
          <div class="col">
            <div class="border rounded p-3 h-100 bg-body-secondary">
              <div class="text-uppercase text-muted small mb-1">{% trans "Формат" %}</div>
              <div class="fw-semibold">{{ club.get_meeting_format_display }}</div>
            </div>
          </div>
          {% if club.meeting_schedule %}
            <div class="col">
              <div class="border rounded p-3 h-100 bg-body-secondary">
                <div class="text-uppercase text-muted small mb-1">{% trans "Расписание" %}</div>
                <div class="fw-semibold">{{ club.meeting_schedule }}</div>
              </div>
            </div>
          {% endif %}
        </div>

        {% if club.description %}
          <div class="mb-4">
            <h2 class="h5 mb-3">{% trans "О клубе" %}</h2>
            <div class="text-body-secondary">{{ club.description|linebreaks }}</div>
          </div>
        {% endif %}

        <div class="d-flex flex-wrap gap-2">
          {% if club.link %}
            <a href="{{ club.link }}" class="btn btn-primary" target="_blank" rel="noopener noreferrer">
              <i class="bi bi-box-arrow-up-right me-1"></i>{% trans "Перейти на сайт клуба" %}
            </a>
          {% endif %}
          <a href="{{ community_url }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left-short me-1"></i>{% trans "Вернуться к списку" %}
          </a>
        </div>
      </div>
    </div>

  </div>
</div>
{% if not user.profile.has_active_premium %}
<!-- Yandex.RTB R-A-17641153-1 -->
<script>
window.yaContextCb.push(() => {
    Ya.Context.AdvManager.render({
        "blockId": "R-A-17641153-1",
        "type": "floorAd",
        "platform": "desktop"
    })
})
</script>
<!-- Yandex.RTB R-A-17641153-4 -->
<script>
window.yaContextCb.push(() => {
    Ya.Context.AdvManager.render({
        "blockId": "R-A-17641153-4",
        "type": "floorAd",
        "platform": "touch"
    })
})
</script>
{% endif %}
{% endblock %}
