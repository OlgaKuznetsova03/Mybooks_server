{% extends "base.html" %}
{% load static shelf_extras %}

{% block title %}{{ genre.name }} · Калейдоскоп книг{% endblock %}

{% block extra_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'books/genre-shelf.css?v=1762270644' %}">
{% endblock %}

{% block content %}
  <section class="genre-hero card border-0 shadow-sm mb-4">
    <div class="card-body">
      <div class="genre-hero__header">
        <div>
          <h1 class="genre-hero__title">{{ genre.name }}</h1>
          <p class="genre-hero__subtitle">
            {{ total_books }} {{ total_books|ru_pluralize:"книга,книги,книг" }} в каталоге ReadTogether
          </p>
        </div>
        <a class="btn btn-light text-primary-emphasis" href="{% url 'book_list' %}">
          <i class="bi bi-arrow-left me-2"></i>Вернуться к каталогу
        </a>
      </div>
      {% if genre.description %}
        <p class="genre-hero__description">{{ genre.description }}</p>
      {% endif %}
    </div>
  </section>

  <div class="genre-shelf-collection">
    {% for shelf in shelves %}
      {% include "books/includes/genre_shelf.html" with shelf=shelf variant=shelf.variant %}
    {% empty %}
      <div class="alert alert-info mb-0">В этом жанре пока нет книг. Добавьте первую!</div>
    {% endfor %}
  </div>

  {% if other_genres %}
    <section class="mt-5" aria-labelledby="other-genres-heading">
      <h2 class="h5 mb-3" id="other-genres-heading">Другие жанры</h2>
      <div class="d-flex flex-wrap gap-2">
        {% for other in other_genres %}
          <a class="badge text-bg-light text-decoration-none" href="{{ other.get_absolute_url }}">
            {{ other.name }} · {{ other.book_count }} {{ other.book_count|ru_pluralize:"книга,книги,книг" }}
          </a>
        {% endfor %}
      </div>
     </section>
  {% endif %}
  <!-- Yandex.RTB R-A-17641153-1 -->
<script>
window.yaContextCb.push(() => {
    Ya.Context.AdvManager.render({
        "blockId": "R-A-17641153-1",
        "type": "floorAd",
        "platform": "desktop"
    })
})
</script>
{% endblock %}